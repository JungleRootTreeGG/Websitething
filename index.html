<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Earth Shipping Routes - Layers Edition</title>

  <link rel="stylesheet" href="https://unpkg.com" />

  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; background: #050814; color: #f5f5f5; font-family: sans-serif; }
    #map { height: 100vh; width: 100vw; }
    .leaflet-container { background: #000; }
  </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com"></script>

<script>
  /* =========================
     1. CONFIGURATIE & KAART
     ========================= */
  const IMG_URL = './assets/world.png';
  const IMG_WIDTH = 1005;
  const IMG_HEIGHT = 500;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -1,
    maxZoom: 2
  });

  const bounds = [, [IMG_HEIGHT, IMG_WIDTH]];
  L.imageOverlay(IMG_URL, bounds).addTo(map);
  map.fitBounds(bounds);

  /* =========================
     2. HAVEN DATA (Handmatige Posities)
     ========================= */
  // De structuur is [Y (van bovenaf), X (van linksaf)]
  const ports = [
    { name: 'Amsterdam',   pos: [250, 500] }, // Placeholder (gebruik klik-hulp om te vervangen)
    { name: 'Rotterdam',   pos: [250, 510] }, // Placeholder
    { name: 'London',      pos: [50, 400] },
    { name: 'Florida',     pos: [274, 171] },
    { name: 'New York',    pos: [200, 200] }, // Placeholder
    { name: 'Singapore',   pos: [350, 750] }  // Placeholder
  ];

  /* =========================
     3. ROUTE LAYERS (De Tekeningen)
     ========================= */
  const routeData = {
    'Florida-London': [
        ports.find(p => p.name === 'Florida').pos,
       , // Gebruik klik-hulp om punten in de oceaan te bepalen
       , // Plak hier de [Y, X] waarden
       ,
        ports.find(p => p.name === 'London').pos
    ],
    'Amsterdam-New York': [], // Nog in te vullen
    'Amsterdam-Singapore': []  // Nog in te vullen
  };

  /* =========================
     4. LOGICA & INTERACTIE
     ========================= */
  let selectedPorts = [];
  let currentRouteLayer = null;

  const anchorIcon = L.icon({
    iconUrl: './assets/anchor.png',
    iconSize: [42, 42],      // Standaardwaarde
    iconAnchor: [21, 21]     // Standaardwaarde
  });

  ports.forEach(port => {
    const marker = L.marker(port.pos, { icon: anchorIcon, title: port.name }).addTo(map);
    marker.on('click', () => {
      handlePortSelection(port);
    });
  });

  function handlePortSelection(port) {
    if (selectedPorts.includes(port)) return;
    if (selectedPorts.length >= 2) selectedPorts = [];
    selectedPorts.push(port);
    if (selectedPorts.length === 2) {
      drawRoute(selectedPorts.name, selectedPorts.name);
    }
  }

  function drawRoute(p1, p2) {
    if (currentRouteLayer) map.removeLayer(currentRouteLayer);
    let path = routeData[`${p1}-${p2}`] || routeData[`${p2}-${p1}`];
    if (path) {
      currentRouteLayer = L.polyline(path, { color: '#00bcd4', weight: 5, opacity: 0.8 }).addTo(map);
      map.fitBounds(currentRouteLayer.getBounds(), { padding: [40, 40] }); // Standaardwaarde
    }
  }

  /* =========================
     5. KLIK-HULP (Voor jou om in te vullen)
     ========================= */
  map.on('click', function(e) {
    const y = Math.round(e.latlng.lat);
    const x = Math.round(e.latlng.lng);
    console.log(`Geklikte pixel locatie: [${y}, ${x}]`);
  });
</script>

</body>
</html>
